<?xml version="1.0" encoding="UTF-8" ?>
<beans 
		xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.springframework.org/schema/beans
        					http://www.springframework.org/schema/beans/spring-beans-2.5.xsd" >
        					
    <bean id="pvr00001" class="ru.acs.fts.eps2.engine.processing.JobBatch" >
      	<property name="description" value="Запрос к предыдущей версии по сообщению MSG.11026" />
		<property name="preparedJobs">
            <list>
								
                <bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="businessProcessing" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map>
									<entry key="envelopes" value="envelopes" />
									<entry key="envelopesVersions" value="envelopesVersions" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
				
				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="changeProcessState" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map >
									<entry key="ignoreChangeState" value="ignoreChangeStateFlag" /> <!-- Используем KEEPED_PROC_INFO -->
									<!-- <entry key="ignoreChangeState" value="true" /> -->
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
								
				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="sendMessage" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map>
									<entry key="envelopeName" value="envelopes" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="sendMessage" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map>
									<entry key="envelopeName" value="envelopesVersions" />
									<entry key="sendToController" value="true" />
									<entry key="controllerQueue" value="ControllerEPS" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>

				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="saveObjectToDb" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map>
									<entry key="objectToSave" value="envelopes" />
									<entry key="needFlush" value="true" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob" >
					<constructor-arg ref="saveObjectToDb" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext" >
							<constructor-arg>
								<map>
									<entry key="objectToSave" value="envelopesVersions" />
									<entry key="needFlush" value="true" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
				
				<bean class="ru.acs.fts.eps2.engine.processing.PreparedJob">
					<constructor-arg ref="updateProcessInfo" />
					<constructor-arg>
						<bean class="ru.acs.fts.eps2.engine.processing.JobContext">
							<constructor-arg>
								<map>
									<entry key="needFlush" value="true" />
								</map>
							</constructor-arg>
						</bean>
					</constructor-arg>
				</bean>
				
				
            </list>
		</property>
   </bean>
</beans>